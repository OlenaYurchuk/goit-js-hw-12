{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const KEY = '42222554-b2624bd1f455ca6190f2bf509';\n\nexport { KEY };\n","export const galleryEl = document.querySelector('.gallery');\n\nfunction createCardsList(cards) {\n    \n    const markup = cards.map(card => \n        `<li class=\"gallery-item\">\n             <div class=\"card-top\">\n            <a class=\"card-link\" href=\"${card.largeImageURL}\">\n                <img class=\"card-image\" src=\"${card.webformatURL}\" alt=\"${card.tags}\">\n            </a>\n        </div>\n        <div class=\"card-bottom\">\n            <p class=\"card-likes\">Likes <span class=\"card-value\">${card.likes}</span></p>\n            <p class=\"card-views\">Views <span class=\"card-value\">${card.views}</span></p>\n            <p class=\"card-comments\">Comments <span class=\"card-value\">${card.comments}</span></p>\n            <p class=\"card-downloads\">Downloads <span class=\"card-value\">${card.downloads}</span></p>\n        </div>\n        </li>`\n    ).join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', markup);\n\n    return markup;\n};\n\nexport { createCardsList };\n","import { KEY } from \"./js/pixabay-api\";\nimport { galleryEl, createCardsList } from \"./js/render-functions\";\n\nimport axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchFormEl = document.querySelector('.search-form');\nconst inputEl = document.querySelector('.search-field');\nconst loadMoreBtn = document.querySelector('.more-photos');\nconst loaderEl = document.querySelector('.loader');\n\nlet searchItems = '';\nlet lightbox = new SimpleLightbox('.gallery a', {});\n\nlet currentPage = 1;\nlet perPage = 15;\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nsearchFormEl.addEventListener('submit', onSearchForm);\n\nfunction onSearchForm(event) {\n    event.preventDefault();\n    galleryEl.innerHTML = '';\n    searchItems = inputEl.value.trim();\n\n    if (searchItems === '') {\n        clearAll();\n        return;\n    }\n\n    fetchPhotos(searchItems, currentPage)   \n    searchFormEl.reset();\n}\n\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onLoadMore() {\n    currentPage += 1;\n    await fetchPhotos(searchItems, currentPage);\n\n    const cardHeight = galleryEl.firstElementChild.getBoundingClientRect().height;\n    smoothScrollBy(cardHeight * 2);\n}\n\nasync function fetchPhotos(searchItems, page) {\n    const params = new URLSearchParams({\n        key: KEY,\n        q: searchItems,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: currentPage,\n        per_page: perPage\n    });\n\n    try {\n        loaderEl.classList.remove('hidden');\n        const response = await axios.get(`?${params}`);\n        const data = response.data;\n\n        if (data.hits.length === 0) {\n            loaderEl.classList.add('hidden');\n            loadMoreBtn.classList.add('hidden');\n            return iziToast.error({\n                position: 'topRight',\n                message: 'Sorry, there are no images matching <br/> your search query. Please try again!'\n            });\n        }\n        \n        createCardsList(data.hits);\n        lightbox.refresh();\n        loaderEl.classList.add('hidden');\n\n        if ((page - 1) * perPage + data.hits.length < data.totalHits) {\n            loaderEl.classList.remove('hidden');\n            loadMoreBtn.classList.remove('hidden');\n            loaderEl.classList.add('hidden');\n        } else {\n            loadMoreBtn.classList.add('hidden');\n            return iziToast.error({\n                 position: 'topRight',\n                 message: 'We are sorry, but you have reached </br> the end of search results'\n            }); \n        }\n    }\n    catch (error) {\n        console.error('Error fetching images:', error);\n    }\n    finally {\n        loaderEl.classList.add('hidden');\n    }\n}\n\nfunction smoothScrollBy(distance) {\n    window.scrollBy({\n        top: distance,\n        left: 0,\n        behavior: 'smooth',\n    });\n}\n\nfunction clearAll() {\n    galleryEl.innerHTML = '';\n    loadMoreBtn.classList.add('hidden');\n}"],"names":["KEY","galleryEl","createCardsList","cards","markup","card","searchFormEl","inputEl","loadMoreBtn","loaderEl","searchItems","lightbox","SimpleLightbox","currentPage","perPage","axios","onSearchForm","event","clearAll","fetchPhotos","onLoadMore","cardHeight","smoothScrollBy","page","params","data","iziToast","error","distance"],"mappings":"owBAAA,MAAMA,EAAM,qCCACC,EAAY,SAAS,cAAc,UAAU,EAE1D,SAASC,EAAgBC,EAAO,CAE5B,MAAMC,EAASD,EAAM,IAAIE,GACrB;AAAA;AAAA,yCAEiCA,EAAK,aAAa;AAAA,+CACZA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA,mEAIhBA,EAAK,KAAK;AAAA,mEACVA,EAAK,KAAK;AAAA,yEACJA,EAAK,QAAQ;AAAA,2EACXA,EAAK,SAAS;AAAA;AAAA,cAGzF,EAAM,KAAK,EAAE,EAET,OAAAJ,EAAU,mBAAmB,YAAaG,CAAM,EAEzCA,CACX,CCdA,MAAME,EAAe,SAAS,cAAc,cAAc,EACpDC,EAAU,SAAS,cAAc,eAAe,EAChDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAW,SAAS,cAAc,SAAS,EAEjD,IAAIC,EAAc,GACdC,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EAE9CC,EAAc,EACdC,EAAU,GAEdC,EAAM,SAAS,QAAU,2BAEzBT,EAAa,iBAAiB,SAAUU,CAAY,EAEpD,SAASA,EAAaC,EAAO,CAKzB,GAJAA,EAAM,eAAc,EACpBhB,EAAU,UAAY,GACtBS,EAAcH,EAAQ,MAAM,OAExBG,IAAgB,GAAI,CACpBQ,IACA,MACH,CAEDC,EAAYT,EAAaG,CAAW,EACpCP,EAAa,MAAK,CACtB,CAEAE,EAAY,iBAAiB,QAASY,CAAU,EAEhD,eAAeA,GAAa,CACxBP,GAAe,EACf,MAAMM,EAAYT,EAAaG,CAAW,EAE1C,MAAMQ,EAAapB,EAAU,kBAAkB,sBAAqB,EAAG,OACvEqB,EAAeD,EAAa,CAAC,CACjC,CAEA,eAAeF,EAAYT,EAAaa,EAAM,CAC1C,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKxB,EACL,EAAGU,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMG,EACN,SAAUC,CAClB,CAAK,EAED,GAAI,CACAL,EAAS,UAAU,OAAO,QAAQ,EAElC,MAAMgB,GADW,MAAMV,EAAM,IAAI,IAAIS,CAAM,EAAE,GACvB,KAEtB,GAAIC,EAAK,KAAK,SAAW,EACrB,OAAAhB,EAAS,UAAU,IAAI,QAAQ,EAC/BD,EAAY,UAAU,IAAI,QAAQ,EAC3BkB,EAAS,MAAM,CAClB,SAAU,WACV,QAAS,gFACzB,CAAa,EAOL,GAJAxB,EAAgBuB,EAAK,IAAI,EACzBd,EAAS,QAAO,EAChBF,EAAS,UAAU,IAAI,QAAQ,GAE1Bc,EAAO,GAAKT,EAAUW,EAAK,KAAK,OAASA,EAAK,UAC/ChB,EAAS,UAAU,OAAO,QAAQ,EAClCD,EAAY,UAAU,OAAO,QAAQ,EACrCC,EAAS,UAAU,IAAI,QAAQ,MAE/B,QAAAD,EAAY,UAAU,IAAI,QAAQ,EAC3BkB,EAAS,MAAM,CACjB,SAAU,WACV,QAAS,oEAC1B,CAAa,CAER,OACMC,EAAO,CACV,QAAQ,MAAM,yBAA0BA,CAAK,CAChD,QACO,CACJlB,EAAS,UAAU,IAAI,QAAQ,CAClC,CACL,CAEA,SAASa,EAAeM,EAAU,CAC9B,OAAO,SAAS,CACZ,IAAKA,EACL,KAAM,EACN,SAAU,QAClB,CAAK,CACL,CAEA,SAASV,GAAW,CAChBjB,EAAU,UAAY,GACtBO,EAAY,UAAU,IAAI,QAAQ,CACtC"}